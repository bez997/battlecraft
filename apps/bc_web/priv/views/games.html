{% extends "template/template.html" %}

{% block content %}
	<div class="games">
        <div class="columns">
            <div class="column is-7">
                <div class="title">
                    <h4 class="is-marginless">Games</h4>
                </div>
            </div>
            <div class="column">
                <form action="/games" method="post">
                    <input type="hidden" name="is_private" value="true" />
                    <button class="button" type="submit">
                        <span>Create Private Game</span>
                        <span class="icon">
                            <i class="fa fa-lock"></i>
                        </span>
                    </button>
                </form>
            </div>
            <div class="column">
                <form action="/games" method="post">
                    <input type="hidden" name="is_private" value="false" />
                    <button class="button is-primary" type="submit">
                        <span>Create Public Game</span>
                        <span class="icon">
                            <i class="fa fa-unlock"></i>
                        </span>
                    </button>
                </form>
            </div>
        </div>
		<div class="game-table">
			<table class="table is-bordered is-striped">
				<thead>
					<th>Id</th>
					<th>state</th>
					<th>Players</th>
					{% if game.state == 3 %}
						<th>Winner</th>
					{% endif %}
					<th>Created</th>
					<th>Actions</th>
				</thead>
				<tbody>
					{% for game in games %}
						<tr>
							<td>{{ game.id }}</td>
							{% if game.state == 1 %}
								<td>Pending</td>
							{% elif game.state == 2 %}
								<td>Started</td>
							{% elif game.state == 3 %}
								<td>Won</td>
								<td>{{ game.winner }}</td>
							{% elif game.state == 4 %}
								<td>Quit</td>
							{% endif %}
							<td>
								<ul>
									{% for player in game.players %}
										<li>{{ player.handle }}</li>
									{% endfor %}
								</ul>
							</td>
							<td>{{ game.created }}</td>
							<td>
								<a class="button is-primary" href="/game/{{ game.id }}">Join</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
